!function(t){"use strict";function n(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function e(t,e){this.el=t,this.options=n({},this.options),n(this.options,e),this._init()}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},o=i[Modernizr.prefixed("transition")],s={transitions:Modernizr.csstransitions};e.prototype.options={closeEl:"",onBeforeOpen:function(){return!1},onAfterOpen:function(){return!1},onBeforeClose:function(){return!1},onAfterClose:function(){return!1}},e.prototype._init=function(){this.button=this.el.querySelector("button"),this.expanded=!1,this.contentEl=this.el.querySelector(".morph-content"),this._initEvents()},e.prototype._initEvents=function(){var t=this;if(this.button.addEventListener("click",function(){t.toggle()}),""!==this.options.closeEl){var n=this.el.querySelector(this.options.closeEl);n&&n.addEventListener("click",function(){t.toggle()})}},e.prototype.toggle=function(){if(this.isAnimating)return!1;this.expanded?this.options.onBeforeClose():(classie.addClass(this.el,"active"),this.options.onBeforeOpen()),this.isAnimating=!0;var t=this,n=function(e){if(e.target!==this)return!1;if(s.transitions){if(t.expanded&&"opacity"!==e.propertyName||!t.expanded&&"width"!==e.propertyName&&"height"!==e.propertyName&&"left"!==e.propertyName&&"top"!==e.propertyName)return!1;this.removeEventListener(o,n)}t.isAnimating=!1,t.expanded?(classie.removeClass(t.el,"active"),t.options.onAfterClose()):t.options.onAfterOpen(),t.expanded=!t.expanded};s.transitions?this.contentEl.addEventListener(o,n):n();var e=this.button.getBoundingClientRect();classie.addClass(this.contentEl,"no-transition"),this.contentEl.style.left="auto",this.contentEl.style.top="auto",setTimeout(function(){t.contentEl.style.left=e.left+"px",t.contentEl.style.top=e.top+"px",t.expanded?(classie.removeClass(t.contentEl,"no-transition"),classie.removeClass(t.el,"open")):setTimeout(function(){classie.removeClass(t.contentEl,"no-transition"),classie.addClass(t.el,"open")},25)},25)},t.UIMorphingButton=e}(window);